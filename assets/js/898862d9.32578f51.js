"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[651],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(c,".").concat(m)]||d[m]||s[m]||o;return n?r.createElement(h,i(i({ref:t},p),{},{components:n})):r.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},15127:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return p},default:function(){return d}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),i=["components"],l={sidebar_position:2},c="Custom CharacterControllers",u={unversionedId:"customCharacterControllers",id:"customCharacterControllers",isDocsHomePage:!1,title:"Custom CharacterControllers",description:"The provided CharacterController gives a large degree of customization allowing you to change behavior for entering or leaving a state or the entire state. If you find this doesn't meet your needs you can swap the CharacterController for an entirely new one.",source:"@site/docs/customCharacterControllers.md",sourceDirName:".",slug:"/customCharacterControllers",permalink:"/Luanoid/docs/customCharacterControllers",editUrl:"https://github.com/raphtalia/Luanoid/edit/main/docs/customCharacterControllers.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"Getting Started",permalink:"/Luanoid/docs/intro"},next:{title:"Custom Animators",permalink:"/Luanoid/docs/customAnimators"}},p=[{value:"Customizing provided controller",id:"customizing-provided-controller",children:[],level:2},{value:"Starting from scratch",id:"starting-from-scratch",children:[],level:2}],s={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"custom-charactercontrollers"},"Custom CharacterControllers"),(0,o.kt)("p",null,"The provided CharacterController gives a large degree of customization allowing you to change behavior for entering or leaving a state or the entire state. If you find this doesn't meet your needs you can swap the CharacterController for an entirely new one."),(0,o.kt)("h2",{id:"customizing-provided-controller"},"Customizing provided controller"),(0,o.kt)("p",null,"To add to existing behavior we simply need to bind to the events that fire when the state is entered or left or running. In this example the character will float in the air when walking and on every step of the simulation they walk faster."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"local npc = Luanoid.new()\n\nnpc.CharacterController.States[Luanoid.CharacterState.Walking].Entered:Connect(function()\n    npc.HipHeight += 10\nend)\n\nnpc.CharacterController.States[Luanoid.CharacterState.Walking].Leaving:Connect(function()\n    npc.HipHeight -= 10\n    npc.WalkSpeed = 16\nend)\n\nnpc.CharacterController.States[Luanoid.CharacterState.Walking].Step:Connect(function()\n    npc.WalkSpeed += 0.1\nend)\n")),(0,o.kt)("p",null,"To remove behavior we can just disconnect all connections to the events. The code sample below will remove the automatic playing and pausing of the Walking animation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"local npc = Luanoid.new()\n\nnpc.CharacterController.States[Luanoid.CharacterState.Walking].Entered:DisconnectAll()\nnpc.CharacterController.States[Luanoid.CharacterState.Walking].Leaving:DisconnectAll()\n")),(0,o.kt)("h2",{id:"starting-from-scratch"},"Starting from scratch"),(0,o.kt)("p",null,"CharacterControllers simply need to be tables with at least a ",(0,o.kt)("inlineCode",{parentName:"p"},"Start()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Stop()")," function. It is suggestioned to look at the provided ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/raphtalia/Luanoid/blob/8a9b1ee080467dd2b3c1c438de767ea8eec9b3bd/src/CharacterController.lua"},"CharacterController")," as a guide for writing your own."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"local CharacterController = {}\n\nfunction CharacterController.Start()\n\nend\n\nfunction CharacterController.Stop()\n    --[[\n        NOTE:\n        Your CharacterController will automatically be stopped if a new\n        CharacterController is assigned, the Luanoid is being destroyed, or the\n        character is parented outside the Workspace.\n    ]]\nend\n\nreturn CharacterController\n")),(0,o.kt)("p",null,"Forces to use to move and orient the character"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Mover")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Aligner"))),(0,o.kt)("p",null,"Properties to take into consideration for determining state"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.MoveDirection")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.LookDirection")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Health")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.WalkSpeed")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.JumpPower")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.HipHeight")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.MaxSlopeAngle")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.AutoRotate")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Jump"))),(0,o.kt)("p",null,"Properties to update"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Floor"))),(0,o.kt)("p",null,"Events to fire when states change"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Died")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.FreeFalling")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Luanoid.Jumping"))))}d.isMDXComponent=!0}}]);